# MCP Comet Browser - Roadmap V2 (Refactoring)

> **–ü–æ–ª–Ω–∞—è –¥–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–µ–∫—Ç–∞**
> –í–µ—Ä—Å–∏—è: 2.1 (–∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –ø–æ—Å–ª–µ –∫—Ä–∏—Ç–∏–∫–∏)
> –°–æ–∑–¥–∞–Ω–æ: 2025-10-07
> **–°–¢–ê–¢–£–°: ‚úÖ –ó–ê–í–ï–†–®–Å–ù (Sprint 1+2, –≤—Å–µ 7 –∑–∞–¥–∞—á –≤—ã–ø–æ–ª–Ω–µ–Ω—ã)**
> Merged –≤ main: 2025-10-07
> –ë–∞–∑–æ–≤—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç: `/home/admsrv/mcp_comet_for_claude_code/.claude/CLAUDE.md`

---

## üìñ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º

**–ö–†–ò–¢–ò–ß–ù–û:** –ü–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –ª—é–±–æ–≥–æ —à–∞–≥–∞ –∏–∑ —ç—Ç–æ–≥–æ roadmap, —Ç—ã –û–ë–Ø–ó–ê–ù –ø—Ä–æ—á–∏—Ç–∞—Ç—å:

```
/home/admsrv/mcp_comet_for_claude_code/.claude/CLAUDE.md
```

–≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç:
- –ü–æ–ª–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞
- –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö 29 –∫–æ–º–∞–Ω–¥
- –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ workaround'—ã (–≤–∫–ª—é—á–∞—è —Ä–µ–¥–∏—Ä–µ–∫—Ç—ã!)
- –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ WSL2 setup
- –ü–∞—Ç—Ç–µ—Ä–Ω—ã –∫–æ–¥–∞

**–ë–ï–ó –ü–†–û–ß–¢–ï–ù–ò–Ø –≠–¢–û–ì–û –§–ê–ô–õ–ê –ù–ï –ù–ê–ß–ò–ù–ê–ô –†–ê–ë–û–¢–£!**

---

## üéØ –¶–µ–ª—å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ (–î–û–°–¢–ò–ì–ù–£–¢–ê ‚úÖ)

–£–±—Ä–∞—Ç—å "–∫–æ—Å—Ç—ã–ª–∏" –∏–∑ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

1. ‚úÖ Dependency injection —á–µ—Ä–µ–∑ kwargs —Å —Ö–∞—Ä–¥–∫–æ–¥–æ–º –∫–æ–º–∞–Ω–¥ ‚Üí **–†–ï–®–ï–ù–û: CommandContext (Task 2.1)**
2. ‚úÖ –†—É—á–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è 29 –∫–æ–º–∞–Ω–¥ ‚Üí **–†–ï–®–ï–ù–û: @register decorator (Task 2.2)**
3. ‚úÖ Dummy instances –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è metadata ‚Üí **–†–ï–®–ï–ù–û: class attributes (Task 1.1)**
4. ‚úÖ State mutation —á–µ—Ä–µ–∑ return values –∫–æ–º–∞–Ω–¥ ‚Üí **–†–ï–®–ï–ù–û: CommandContext (Task 2.1)**
5. ‚úÖ –†–∞–∑–¥—É—Ç—ã–π page_info.json —Å –º—É—Å–æ—Ä–æ–º ‚Üí **–†–ï–®–ï–ù–û: JsonOptimizer, 58.8% —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ (Task 2.4)**
6. ‚úÖ Sync CDP calls –≤ async –∫–æ–¥–µ ‚Üí **–†–ï–®–ï–ù–û: AsyncCDP wrapper (Task 2.3)**
7. ‚úÖ –†–∞–∑—Ä–æ–∑–Ω–µ–Ω–Ω—ã–π logging –±–µ–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã ‚Üí **–†–ï–®–ï–ù–û: structured logging (Task 1.2)**

**‚ö†Ô∏è –ù–ï –∫–æ—Å—Ç—ã–ª–∏ (–æ—Å—Ç–∞–≤–ª–µ–Ω—ã –∫–∞–∫ –µ—Å—Ç—å):**
- ‚úÖ –†–µ–¥–∏—Ä–µ–∫—Ç—ã –Ω–∞ save_page_info() - –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π Claude Code
- ‚úÖ JSON —Ñ–∞–π–ª—ã –¥–ª—è –≤—ã–≤–æ–¥–∞ - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

---

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Roadmap

### **Sprint 1: Quick Wins** ‚úÖ –ó–ê–í–ï–†–®–Å–ù (9h, –Ω–µ –ª–æ–º–∞–µ—Ç API)
- ‚úÖ Task 1.1: Command metadata as class attributes (2h) - commit: 0992a3e
- ‚úÖ Task 1.2: Structured logging (3h) - commit: 32631ee
- ‚úÖ Task 1.3: Error hierarchy (4h) - commit: 7aaee29

### **Sprint 2: Core Refactoring** ‚úÖ –ó–ê–í–ï–†–®–Å–ù (19h, breaking changes)
- ‚úÖ Task 2.1: CommandContext –¥–ª—è Dependency Injection (6h) üî¥ **–ö—Ä–∏—Ç–∏—á–Ω—ã–π** - commit: 3bd16b5
- ‚úÖ Task 2.2: Auto-discovery –∫–æ–º–∞–Ω–¥ —á–µ—Ä–µ–∑ decorators (4h) - commit: 83f7ec7
- ‚úÖ Task 2.3: Async CDP wrapper (6h) - commit: 772f39d
- ‚úÖ Task 2.4: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å save_page_info (3h) ‚ú® - commit: f46e844

### **Sprint 3: Advanced Features** üîú –ù–ï –ù–ê–ß–ê–¢ (NOT READY)
- Task 3.1: Connection lifecycle manager (–∫–æ–Ω—Ü–µ–ø—Ü–∏—è, —Ç—Ä–µ–±—É–µ—Ç design doc)
- Task 3.2: Plugin system (–∫–æ–Ω—Ü–µ–ø—Ü–∏—è, —Ç—Ä–µ–±—É–µ—Ç design doc)
- Task 3.3: Metrics (–∫–æ–Ω—Ü–µ–ø—Ü–∏—è, —Ç—Ä–µ–±—É–µ—Ç design doc)

**Total: 28h –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –∏–∑ 28h** (Sprint 1+2)
**Merge commit:** 34d921c
**Backup branch:** backup-main-20251007

---

## üîó –ì—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∑–∞–¥–∞—á

```
       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
       ‚îÇ  START   ‚îÇ
       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ                ‚îÇ              ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 1.1    ‚îÇ      ‚îÇ 1.2    ‚îÇ    ‚îÇ 1.3    ‚îÇ
‚îÇMetadata‚îÇ      ‚îÇLogging ‚îÇ    ‚îÇErrors  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚îÇ                              ‚îÇ
    ‚îÇ           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚îÇ           ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îê
‚îÇ 2.1 Context DI ‚îÇ  üî¥ CRITICAL PATH
‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚îÇ
    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ          ‚îÇ             ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 2.2    ‚îÇ ‚îÇ 2.3   ‚îÇ   ‚îÇ 2.4    ‚îÇ
‚îÇRegistry‚îÇ ‚îÇAsyncDP‚îÇ   ‚îÇOptimize‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚îÇ          ‚îÇ             ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ
          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
          ‚îÇ  DONE ‚úÖ ‚îÇ
          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø—É—Ç—å: 1.1 ‚Üí 2.1 ‚Üí 2.2 (12h)
```

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- Task 2.1 —Ç—Ä–µ–±—É–µ—Ç Task 1.1 (–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∫–∞–∫ class attributes)
- Task 2.2 —Ç—Ä–µ–±—É–µ—Ç Task 2.1 (–¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)
- Task 2.3 —Ç—Ä–µ–±—É–µ—Ç Task 1.3 (–¥–ª—è CDPTimeoutError)
- Task 2.4 –Ω–µ–∑–∞–≤–∏—Å–∏–º–∞ (–º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞ –≤—Å–µ–≥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è Sprint 1 + Sprint 2:

**Code Quality:**
- [x] –ù–µ—Ç `if tool_name in [...]` –≤ protocol.py
- [x] –ù–µ—Ç `cmd_class(tab=None)` –¥–ª—è metadata
- [x] –ù–µ—Ç `self.tab.Runtime.evaluate()` - —Ç–æ–ª—å–∫–æ `await self.cdp.evaluate()`
- [x] –ù–µ—Ç `print(..., file=sys.stderr)` - —Ç–æ–ª—å–∫–æ `logger.info/debug/error()`
- [x] –ù–µ—Ç `except: pass` - –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**Functionality:**
- [x] –í—Å–µ 29 –∫–æ–º–∞–Ω–¥ —Ä–∞–±–æ—Ç–∞—é—Ç
- [x] –†–µ–¥–∏—Ä–µ–∫—Ç—ã –æ—Å—Ç–∞–ª–∏—Å—å (—ç—Ç–æ —Ñ–∏—á–∞!)
- [x] page_info.json < 3KB (–±—ã–ª–æ 10KB)
- [x] –õ–æ–≥–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω—ã: `[TIMESTAMP] LEVEL [module] message`
- [x] –û—à–∏–±–∫–∏ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω—ã: CommandError, BrowserError, CDPError

**Testing:**
- [x] –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ —É—Å–ø–µ—à–µ–Ω
- [x] `tools/list` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 29 –∫–æ–º–∞–Ω–¥
- [x] –ö–ª–∏–∫ –ø–æ —ç–ª–µ–º–µ–Ω—Ç—É —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] save_page_info —Å–æ–∑–¥–∞—ë—Ç –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π JSON
- [x] –õ–æ–≥–∏ —á–∏—Ç–∞–±–µ–ª—å–Ω—ã –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã

---

## üîô –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ï—Å–ª–∏ –∑–∞–¥–∞—á–∞ —Å–ª–æ–º–∞–ª–∞ —Å–∏—Å—Ç–µ–º—É:

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å —Ç–µ–∫—É—â–∏–π –∫–æ–º–º–∏—Ç
git log -1

# 2. –ü–æ—Å–º–æ—Ç—Ä–∏ —á—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å
python3 server.py
# –ó–∞–ø–∏—à–∏ –æ—à–∏–±–∫—É

# 3. –û—Ç–∫–∞—Ç–∏—Å—å –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∫–æ–º–º–∏—Ç
git reset --hard HEAD~1

# 4. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç
python3 server.py
echo '{"jsonrpc":"2.0","id":1,"method":"tools/list"}' | python3 server.py

# 5. –ò–∑—É—á–∏ —á—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫
git diff HEAD@{1} HEAD > failed_changes.diff
cat failed_changes.diff

# 6. –°–æ–∑–¥–∞–π issue –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
# –û–ø–∏—à–∏: —á—Ç–æ –¥–µ–ª–∞–ª, –∫–∞–∫–∞—è –æ—à–∏–±–∫–∞, —á—Ç–æ –≤ diff
```

**–ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Ç–æ—á–∫–∏ –æ—Ç–∫–∞—Ç–∞:**
- –ü–æ—Å–ª–µ Task 2.1: BREAKING CHANGE - —Å—Ç–∞—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
- –ü–æ—Å–ª–µ Task 2.3: –ú–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å—Å—è timing-–∑–∞–≤–∏—Å–∏–º—ã–π –∫–æ–¥
- –ü–µ—Ä–µ–¥ –æ—Ç–∫–∞—Ç–æ–º: —Å–æ—Ö—Ä–∞–Ω–∏ –ª–æ–≥–∏ –æ—à–∏–±–æ–∫!

---

---

# üöÄ Sprint 1: Quick Wins (9h)

## Task 1.1: Command metadata as class attributes (2h)

### üìù –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–±–ª–µ–º—ã

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–∏–∑ CLAUDE.md):**

–í `mcp/protocol.py:159` –µ—Å—Ç—å –∫–æ—Å—Ç—ã–ª—å:
```python
def list_tools(self):
    tools = []
    for cmd_name, cmd_class in self.commands.items():
        cmd_instance = cmd_class(tab=None)  # ‚ùå tab=None –Ω–∞—Ä—É—à–∞–µ—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç!
        tools.append(cmd_instance.to_mcp_tool())
    return {"tools": tools}
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå –°–æ–∑–¥–∞—ë—Ç—Å—è –æ–±—ä–µ–∫—Ç —Å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º (tab=None)
- ‚ùå –ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ self.tab - –±—É–¥–µ—Ç NPE
- ‚ùå –ë–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ instance –¥–ª—è —á—Ç–µ–Ω–∏—è metadata

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```python
class Command(ABC):
    @property
    @abstractmethod
    def name(self) -> str: pass
```

### üéØ –¶–µ–ª—å

–°–¥–µ–ª–∞—Ç—å metadata (name, description, input_schema) –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏ –∫–ª–∞—Å—Å–∞, –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è instance.

### ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

1. ‚úÖ –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ `CommandClass.name` –±–µ–∑ instance
2. ‚úÖ `to_mcp_tool()` —Å—Ç–∞–ª `@classmethod`
3. ‚úÖ `protocol.py:list_tools()` –Ω–µ —Å–æ–∑–¥–∞—ë—Ç dummy instances
4. ‚úÖ –í—Å–µ 29 –∫–æ–º–∞–Ω–¥ –æ–±–Ω–æ–≤–ª–µ–Ω—ã
5. ‚úÖ –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç

### üìã –ü–æ—à–∞–≥–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç

> **–ö–æ–ø–∏—Ä—É–π —ç—Ç–æ—Ç –ø—Ä–æ–º–ø—Ç –≤ –ù–û–í–´–ô –ß–ê–¢ –¥–ª—è –Ω–∞—á–∞–ª–∞ Task 1.1:**

```markdown
–ú–Ω–µ –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å Task 1.1 –∏–∑ roadmap-v2.md: "Command metadata as class attributes"

# –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –°–ù–ê–ß–ê–õ–ê:
1. –ü—Ä–æ—á–∏—Ç–∞–π –∫–æ–Ω—Ç–µ–∫—Å—Ç: Read('/home/admsrv/mcp_comet_for_claude_code/.claude/CLAUDE.md')
2. –ü—Ä–æ—á–∏—Ç–∞–π roadmap: Read('/home/admsrv/mcp_comet_for_claude_code/docs/roadmap-v2.md')
3. –ù–∞–π–¥–∏ —Å–µ–∫—Ü–∏—é "Task 1.1" –∏ —Å–ª–µ–¥—É–π –®–ê–ì –ó–ê –®–ê–ì–û–ú

# –ó–ê–î–ê–ß–ê:
–ü–µ—Ä–µ–¥–µ–ª–∞—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥ (name, description, input_schema) –∏–∑ instance properties –≤ class attributes.

# –í–ê–ñ–ù–û:
- –ù–ï –ø—Ä–æ–ø—É—Å–∫–∞–π —à–∞–≥–∏ –∏–∑ roadmap
- –ù–ï –º–µ–Ω—è–π –ª–æ–≥–∏–∫—É execute()
- –ù–ï —Ç—Ä–æ–≥–∞–π dependency injection (—ç—Ç–æ Task 2.1)
- –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–æ–∑–¥–∞–π –∫–æ–º–º–∏—Ç —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º –∏–∑ roadmap

# –ù–ê–ß–ù–ò –°:
Read('/home/admsrv/mcp_comet_for_claude_code/commands/base.py')

–ü–æ—Å–ª–µ –ø—Ä–æ—á—Ç–µ–Ω–∏—è —Å–∫–∞–∂–∏ —á—Ç–æ —Ç—ã –ø–æ–Ω—è–ª –∑–∞–¥–∞—á—É –∏ –≥–æ—Ç–æ–≤ –Ω–∞—á–∞—Ç—å.
```

### üîç –§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è

1. `commands/base.py` - –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å
2. `commands/*.py` - –≤—Å–µ 29 –∫–æ–º–∞–Ω–¥
3. `mcp/protocol.py` - list_tools()

---

## Task 1.2: Structured logging (3h)

### üìù –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–±–ª–µ–º—ã

–°–µ–π—á–∞—Å –ª–æ–≥–∏ —Ä–∞–∑—Ä–æ–∑–Ω–µ–Ω–Ω—ã:
```python
print("[MCP] click_by_text: searching...", file=sys.stderr)  # commands/interaction.py
print(f"Tab connection lost: {e}", file=sys.stderr)          # browser/connection.py
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå –ù–µ—Ç –µ–¥–∏–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞
- ‚ùå –ù–µ–ª—å–∑—è —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ —É—Ä–æ–≤–Ω—è–º
- ‚ùå –ù–µ—Ç timestamp –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç–∞—Ö
- ‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å verbosity

### üéØ –¶–µ–ª—å

–í–Ω–µ–¥—Ä–∏—Ç—å structured logging —á–µ—Ä–µ–∑ `logging` –º–æ–¥—É–ª—å.

### ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

1. ‚úÖ –í—Å–µ `print()` –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ `logger.info/debug/error()`
2. ‚úÖ –ï–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç: `[TIMESTAMP] LEVEL [module] message`
3. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ `MCP_LOG_LEVEL` env var
4. ‚úÖ –õ–æ–≥–∏ —Ç–æ–ª—å–∫–æ –≤ stderr (–Ω–µ stdout)

### üìã –ü–æ—à–∞–≥–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç

```markdown
Task 1.2: Structured logging

# –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û:
1. Read('/home/admsrv/mcp_comet_for_claude_code/.claude/CLAUDE.md')
2. Read('/home/admsrv/mcp_comet_for_claude_code/docs/roadmap-v2.md') - –Ω–∞–π–¥–∏ Task 1.2

# –ó–ê–î–ê–ß–ê:
–í–Ω–µ–¥—Ä–∏—Ç—å structured logging —á–µ—Ä–µ–∑ –º–æ–¥—É–ª—å logging.

# –ù–ê–ß–ù–ò –°:
–°–æ–∑–¥–∞–π mcp/logging_config.py —Å–æ–≥–ª–∞—Å–Ω–æ roadmap

–ü–æ–¥—Ç–≤–µ—Ä–¥–∏ —á—Ç–æ –ø—Ä–æ—á–∏—Ç–∞–ª roadmap –∏ –≥–æ—Ç–æ–≤ –Ω–∞—á–∞—Ç—å.
```

### üîç –§–∞–π–ª—ã

1. `mcp/logging_config.py` (–Ω–æ–≤—ã–π)
2. `server.py`, `mcp/protocol.py`, `browser/connection.py`
3. `commands/*.py` (—Å –ª–æ–≥–∞–º–∏)

---

## Task 1.3: Error hierarchy (4h)

### üìù –ö–æ–Ω—Ç–µ–∫—Å—Ç

–í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≤—è—Ç—Å—è —á–µ—Ä–µ–∑ `Exception`:
```python
except Exception as e:
    return {"error": {"code": -32000, "message": str(e)}}
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå –û–¥–∏–Ω –∫–æ–¥ –¥–ª—è –≤—Å–µ—Ö –æ—à–∏–±–æ–∫
- ‚ùå –ù–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- ‚ùå Silent failures: `except: pass`

### üéØ –¶–µ–ª—å

–°–æ–∑–¥–∞—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏—é —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π.

### ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏

1. ‚úÖ –ò–µ—Ä–∞—Ä—Ö–∏—è –≤ `mcp/errors.py`
2. ‚úÖ –ö–∞–∂–¥–∞—è –æ—à–∏–±–∫–∞ = —Å–≤–æ–π JSON-RPC –∫–æ–¥
3. ‚úÖ Protocol –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ —Ç–∏–ø—É
4. ‚úÖ –£–±—Ä–∞–Ω—ã `except: pass`

### üìã –ü—Ä–æ–º–ø—Ç

```markdown
Task 1.3: Error hierarchy

# –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û:
Read CLAUDE.md, roadmap Task 1.3

# –ó–ê–î–ê–ß–ê:
–°–æ–∑–¥–∞—Ç—å —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è —Å JSON-RPC –∫–æ–¥–∞–º–∏

# –ù–ê–ß–ù–ò:
–°–æ–∑–¥–∞–π mcp/errors.py —Å–æ–≥–ª–∞—Å–Ω–æ roadmap
```

---

---

# üîß Sprint 2: Core Refactoring (19h)

## Task 2.1: CommandContext –¥–ª—è DI (6h) üî¥ –ö–†–ò–¢–ò–ß–ù–´–ô

### üìù –ö–æ–Ω—Ç–µ–∫—Å—Ç

**–ì–õ–ê–í–ù–´–ô –ö–û–°–¢–´–õ–¨ –ü–†–û–ï–ö–¢–ê (protocol.py:177-187):**

```python
# ‚ùå –•–ê–†–î–ö–û–î:
if tool_name in ['click', 'click_by_text', 'move_cursor', 'force_click']:
    arguments['cursor'] = self.connection.cursor
elif tool_name in ['get_console_logs', 'devtools_report']:
    arguments['console_logs'] = self.connection.console_logs
# ... –µ—â—ë 3 —É—Å–ª–æ–≤–∏—è
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå 5+ —É—Å–ª–æ–≤–∏–π —Å –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ–º –∫–æ–º–∞–Ω–¥
- ‚ùå –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∫–æ–º–∞–Ω–¥—ã - –Ω—É–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å –¥–æ–±–∞–≤–∏—Ç—å —Å—é–¥–∞
- ‚ùå –ö–æ–º–∞–Ω–¥–∞ –Ω–µ –¥–µ–∫–ª–∞—Ä–∏—Ä—É–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚ùå –ú–∞–≥–∏—á–µ—Å–∫–∏–µ kwargs

### üéØ –¶–µ–ª—å

–°–æ–∑–¥–∞—Ç—å `CommandContext` –¥–ª—è —è–≤–Ω–æ–≥–æ DI. –£–±—Ä–∞—Ç—å —Ö–∞—Ä–¥–∫–æ–¥.

### ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏

1. ‚úÖ `CommandContext` —Å –ø–æ–ª—è–º–∏: tab, cursor, browser, console_logs
2. ‚úÖ –ö–æ–º–∞–Ω–¥—ã –¥–µ–∫–ª–∞—Ä–∏—Ä—É—é—Ç: `requires_cursor = True`
3. ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
4. ‚úÖ –£–±—Ä–∞–Ω —Ö–∞—Ä–¥–∫–æ–¥ –∏–∑ protocol.py:177-187
5. ‚úÖ –í—Å–µ 29 –∫–æ–º–∞–Ω–¥ –æ–±–Ω–æ–≤–ª–µ–Ω—ã

### üìã –ü—Ä–æ–º–ø—Ç

```markdown
Task 2.1: CommandContext –¥–ª—è Dependency Injection

üî¥ –ö–†–ò–¢–ò–ß–ù–ê–Ø –ó–ê–î–ê–ß–ê - —Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ!

# –ó–ê–í–ò–°–ò–ú–û–°–¢–ò:
–¢—Ä–µ–±—É–µ—Ç Task 1.1 (metadata as class attributes)
–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ Task 1.1 –≤—ã–ø–æ–ª–Ω–µ–Ω–∞!

# –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û:
1. Read CLAUDE.md
2. Read roadmap Task 2.1
3. –ò–∑—É—á–∏ —Ç–µ–∫—É—â–∏–π —Ö–∞—Ä–¥–∫–æ–¥ –≤ mcp/protocol.py:177-187

# –ó–ê–î–ê–ß–ê:
–°–æ–∑–¥–∞—Ç—å CommandContext –∏ —É–±—Ä–∞—Ç—å –≤–µ—Å—å —Ö–∞—Ä–¥–∫–æ–¥ DI

# BREAKING CHANGE:
–≠—Ç–æ –ª–æ–º–∞–µ—Ç API! –í–µ—Ä—Å–∏—è ‚Üí 2.0.0

–ü–æ–¥—Ç–≤–µ—Ä–¥–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ breaking change.
```

### üîç –§–∞–π–ª—ã

1. `commands/context.py` (–Ω–æ–≤—ã–π)
2. `commands/base.py` - –Ω–æ–≤—ã–π __init__
3. `mcp/protocol.py` - —É–±—Ä–∞—Ç—å —Ö–∞—Ä–¥–∫–æ–¥
4. **–í—Å–µ 29 –∫–æ–º–∞–Ω–¥** - –¥–æ–±–∞–≤–∏—Ç—å requires_*

---

## Task 2.2: Auto-discovery (4h)

### üìù –ö–æ–Ω—Ç–µ–∫—Å—Ç

–†—É—á–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è 47 —Å—Ç—Ä–æ–∫:
```python
def _register_commands(self):
    self.commands['open_url'] = OpenUrlCommand
    self.commands['get_text'] = GetTextCommand
    # ... 27 –∫–æ–º–∞–Ω–¥
```

### üéØ –¶–µ–ª—å

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã.

### ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏

1. ‚úÖ `CommandRegistry` —Å `@register`
2. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç –º–æ–¥—É–ª–µ–π
3. ‚úÖ `protocol.py` –±–µ–∑ —Å–ø–∏—Å–∫–∞ –∫–æ–º–∞–Ω–¥
4. ‚úÖ –í—Å–µ 29 –∫–æ–º–∞–Ω–¥ —Å `@register`

### üìã –ü—Ä–æ–º–ø—Ç

```markdown
Task 2.2: Auto-discovery –∫–æ–º–∞–Ω–¥

# –ó–ê–í–ò–°–ò–ú–û–°–¢–ò:
–¢—Ä–µ–±—É–µ—Ç Task 2.1 (CommandContext)

# –ó–ê–î–ê–ß–ê:
–°–æ–∑–¥–∞—Ç—å CommandRegistry –¥–ª—è auto-discovery

# –ù–ê–ß–ù–ò:
–°–æ–∑–¥–∞–π commands/registry.py
```

---

## Task 2.3: Async CDP wrapper (6h)

### üìù –ö–æ–Ω—Ç–µ–∫—Å—Ç

Sync CDP calls –≤ async –∫–æ–¥–µ:
```python
self.tab.Runtime.evaluate(expression="1+1")  # ‚ùå –ë–ª–æ–∫–∏—Ä—É–µ—Ç event loop
```

### üéØ –¶–µ–ª—å

Async –æ–±—ë—Ä—Ç–∫–∞ —Å timeout'–∞–º–∏.

### ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏

1. ‚úÖ `AsyncCDP` wrapper
2. ‚úÖ –í—Å–µ –≤—ã–∑–æ–≤—ã —á–µ—Ä–µ–∑ executor + timeout
3. ‚úÖ Thread-safety —á–µ—Ä–µ–∑ Lock
4. ‚úÖ –ö–æ–º–∞–Ω–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `self.cdp`

### üìã –ü—Ä–æ–º–ø—Ç

```markdown
Task 2.3: Async CDP wrapper

# –ó–ê–í–ò–°–ò–ú–û–°–¢–ò:
–¢—Ä–µ–±—É–µ—Ç Task 1.3 (–¥–ª—è CDPTimeoutError)

# –ó–ê–î–ê–ß–ê:
–°–æ–∑–¥–∞—Ç—å AsyncCDP –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π async –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

# –ù–ê–ß–ù–ò:
–°–æ–∑–¥–∞–π browser/async_cdp.py

# –ü–û–î–ó–ê–î–ê–ß–ò:
1. AsyncCDP –∫–ª–∞—Å—Å (2h)
2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ connection (2h)
3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ (2h)
```

---

## Task 2.4: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å save_page_info (3h) ‚ú®

### üìù –ö–æ–Ω—Ç–µ–∫—Å—Ç

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –†–µ–¥–∏—Ä–µ–∫—Ç—ã - –ù–ï –±–∞–≥, –∞ —Ñ–∏—á–∞!

–ü—Ä–∏—á–∏–Ω—ã —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤:
1. Claude Code –æ–±—Ä–µ–∑–∞–µ—Ç –¥–ª–∏–Ω–Ω—ã–µ –≤—ã–≤–æ–¥—ã
2. Comet Browser –Ω–µ –¥–∞—ë—Ç –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ DevTools
3. JSON —Ñ–∞–π–ª - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**–†–ï–ê–õ–¨–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:** `page_info.json` —Ä–∞–∑–¥—É—Ç –º—É—Å–æ—Ä–æ–º!

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –†–∞–∑–º–µ—Ä: 10KB (395 —Å—Ç—Ä–æ–∫)
- –ú—É—Å–æ—Ä: –¥–ª–∏–Ω–Ω—ã–µ className, null –ø–æ–ª—è, width/height
- –î—É–±–ª–∏–∫–∞—Ç—ã: footer –¥—É–±–ª–∏—Ä—É–µ—Ç header
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –Ω–µ—Ç: –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Ä–∞–≤–Ω—ã

**–ü—Ä–∏–º–µ—Ä –º—É—Å–æ—Ä–∞:**
```json
{
  "className": "relative px-3 py-2 text-sm font-medium transition-all duration-300 hover:text-red-600 group text-gray-700",  // ‚Üê 120 —Å–∏–º–≤–æ–ª–æ–≤ –±–µ—Å–ø–æ–ª–µ–∑–Ω–æ—Å—Ç–∏
  "position": {"x": 1032, "y": 40, "width": 76, "height": 36},  // ‚Üê width/height –Ω–µ –Ω—É–∂–Ω—ã
  "id": null  // ‚Üê –∑–∞—á–µ–º —Ö—Ä–∞–Ω–∏—Ç—å null?
}
```

### üéØ –¶–µ–ª—å

**–ù–ï —É–±—Ä–∞—Ç—å —Ä–µ–¥–∏—Ä–µ–∫—Ç—ã**, –∞ **–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—ã—Ö–æ–¥–Ω–æ–π JSON**:
- –°–æ–∫—Ä–∞—Ç–∏—Ç—å —Ä–∞–∑–º–µ—Ä –Ω–∞ 70-80% (–¥–æ 2-3KB)
- –£–±—Ä–∞—Ç—å –º—É—Å–æ—Ä: null, –¥–ª–∏–Ω–Ω—ã–µ className, width/height
- –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è: skip footer duplicates
- –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è: —Ç–æ–ø-20 –≤–∞–∂–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞: buttons, links, inputs –æ—Ç–¥–µ–ª—å–Ω–æ

### ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏

1. ‚úÖ –†–∞–∑–º–µ—Ä JSON < 3KB (–±—ã–ª–æ 10KB)
2. ‚úÖ –£–±—Ä–∞–Ω—ã null, –¥–ª–∏–Ω–Ω—ã–µ className
3. ‚úÖ –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤
4. ‚úÖ –¢–æ–ø-20 –ø–æ importance score
5. ‚úÖ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Ç–∏–ø–∞–º
6. ‚úÖ –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ: timestamp, context
7. ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä `full=True` –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### üìã –ü–æ—à–∞–≥–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç

```markdown
Task 2.4: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å save_page_info (–ù–ï —É–±—Ä–∞—Ç—å —Ä–µ–¥–∏—Ä–µ–∫—Ç—ã!)

# –í–ê–ñ–ù–û:
–†–µ–¥–∏—Ä–µ–∫—Ç—ã - —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ!
–ü—Ä–æ–±–ª–µ–º–∞ - –≤ –∫–∞—á–µ—Å—Ç–≤–µ –¥–∞–Ω–Ω—ã—Ö –≤ JSON, –ù–ï –≤ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞—Ö.

# –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û:
1. Read CLAUDE.md - –ø–æ–π–º–∏ –ü–û–ß–ï–ú–£ —Ä–µ–¥–∏—Ä–µ–∫—Ç—ã –Ω—É–∂–Ω—ã
2. Read roadmap Task 2.4 - –ü–û–õ–ù–û–°–¢–¨–Æ –ø–µ—Ä–µ–¥–µ–ª–∞–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞
3. –ü–æ—Å–º–æ—Ç—Ä–∏ —Ç–µ–∫—É—â–∏–π page_info.json (–µ—Å–ª–∏ –µ—Å—Ç—å)

# –¶–ï–õ–¨:
–°–æ–∫—Ä–∞—Ç–∏—Ç—å JSON —Å 10KB –¥–æ 2-3KB, —É–±—Ä–∞–≤ –º—É—Å–æ—Ä

# –ó–ê–î–ê–ß–ê:
1. –°–æ–∑–¥–∞—Ç—å JsonOptimizer –≤ utils/json_optimizer.py
2. –û–±–Ω–æ–≤–∏—Ç—å save_page_info.py –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
3. –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä full=True –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

# –û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢:
Before: 10KB, 395 —Å—Ç—Ä–æ–∫, –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å –º—É—Å–æ—Ä–æ–º
After: 2-3KB, ~80 —Å—Ç—Ä–æ–∫, —Ç–æ–ø-20 —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –±–µ–∑ –º—É—Å–æ—Ä–∞

–≠–∫–æ–Ω–æ–º–∏—è: ~2000 —Ç–æ–∫–µ–Ω–æ–≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞!

# –ù–ê–ß–ù–ò –°:
–°–æ–∑–¥–∞–π utils/json_optimizer.py —Å–æ–≥–ª–∞—Å–Ω–æ roadmap

–ü–æ–¥—Ç–≤–µ—Ä–¥–∏ —á—Ç–æ –ø–æ–Ω—è–ª - —Ä–µ–¥–∏—Ä–µ–∫—Ç—ã –û–°–¢–ê–Æ–¢–°–Ø, –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º –î–ê–ù–ù–´–ï.
```

### üîç –§–∞–π–ª—ã

1. `utils/json_optimizer.py` (–Ω–æ–≤—ã–π) - –ª–æ–≥–∏–∫–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
2. `commands/save_page_info.py` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä–∞
3. `.claude/CLAUDE.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —É–ª—É—á—à–µ–Ω–∏–π

### üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
ls -lh page_info.json  # ~10KB

# –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
mcp__comet-browser__save_page_info()
ls -lh page_info.json  # ~2-3KB ‚úÖ

# –°—Ä–∞–≤–Ω–∏—Ç—å
wc -l page_info.json   # ~80 —Å—Ç—Ä–æ–∫ –≤–º–µ—Å—Ç–æ 395

# –ü–æ–ª–Ω—ã–π –≤—ã–≤–æ–¥ (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)
mcp__comet-browser__save_page_info(full=True)
ls -lh page_info.json  # ~10KB (–∫–∞–∫ —Ä–∞–Ω—å—à–µ)
```

### ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

**–ü—Ä–æ–±–ª–µ–º–∞:** –í–∞–∂–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω
**–†–µ—à–µ–Ω–∏–µ:** –£–ª—É—á—à–∏ scoring –≤ `prioritize_elements()`

**–ü—Ä–æ–±–ª–µ–º–∞:** –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è —É–¥–∞–ª–∏–ª–∞ –Ω—É–∂–Ω–æ–µ
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π –∫–ª—é—á: `(text, tag, y_position)`

**–ü—Ä–æ–±–ª–µ–º–∞:** JSON –≤—Å—ë —Ä–∞–≤–Ω–æ >5KB
**–†–µ—à–µ–Ω–∏–µ:** –£–º–µ–Ω—å—à–∏ limit –¥–æ 15, –æ–±—Ä–µ–∑–∞–π text –¥–æ 30

---

---

# üé® Sprint 3: Advanced (NOT READY)

## ‚ö†Ô∏è –í–ê–ñ–ù–û: Sprint 3 - —Ç–æ–ª—å–∫–æ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

–≠—Ç–∏ –∑–∞–¥–∞—á–∏ —Ç—Ä–µ–±—É—é—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ design doc.
–¢–µ–∫—É—â–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è - –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω—ã–µ, –ù–ï –≥–æ—Ç–æ–≤—ã –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

### Task 3.1: Connection lifecycle

**–ö–æ–Ω—Ü–µ–ø—Ü–∏—è:** –ü—Ä–æ–∞–∫—Ç–∏–≤–Ω—ã–π health check –≤–º–µ—Å—Ç–æ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ reconnect.

**–¢—Ä–µ–±—É–µ—Ç:** –û—Ç–¥–µ–ª—å–Ω—ã–π design doc —Å:
- State machine –¥–∏–∞–≥—Ä–∞–º–º–∞
- Metrics –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- Graceful shutdown –ª–æ–≥–∏–∫–∞

### Task 3.2: Plugin system

**–ö–æ–Ω—Ü–µ–ø—Ü–∏—è:** –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–º–∞–Ω–¥ –∏–∑ –≤–Ω–µ—à–Ω–∏—Ö –ø–∞–∫–µ—Ç–æ–≤.

**–¢—Ä–µ–±—É–µ—Ç:** Design doc:
- Plugin API specification
- Sandboxing –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- Versioning –∏ dependencies

### Task 3.3: Metrics

**–ö–æ–Ω—Ü–µ–ø—Ü–∏—è:** Observability –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

**–¢—Ä–µ–±—É–µ—Ç:** Design doc:
- –ö–∞–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏ —Å–æ–±–∏—Ä–∞—Ç—å
- –§–æ—Ä–º–∞—Ç —ç–∫—Å–ø–æ—Ä—Ç–∞ (Prometheus?)
- Storage –∏ retention

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ù–µ –Ω–∞—á–∏–Ω–∞—Ç—å Sprint 3 –±–µ–∑ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

---

---

# üìä –ò—Ç–æ–≥–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∑–∞–¥–∞—á

| Sprint | Task | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –í—Ä–µ–º—è | Breaking | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç |
|--------|------|-----------|-----------|-------|----------|------------|
| 1.1 | Metadata as class | üî¥ High | Low | 2h | No | - |
| 1.2 | Logging | üî¥ High | Low | 3h | No | - |
| 1.3 | Error hierarchy | üî¥ High | Medium | 4h | No | - |
| 2.1 | CommandContext DI | üî¥ **CRITICAL** | High | 6h | **Yes** | 1.1 |
| 2.2 | Auto-discovery | üî¥ High | Medium | 4h | No | 2.1 |
| 2.3 | Async CDP | üü° Medium | Medium | 6h | Partial | 1.3 |
| 2.4 | Optimize JSON | üü° Medium | Medium | 3h | No | - |
| 3.x | Advanced | üü¢ Low | - | - | - | Design docs |

**Total Sprint 1+2: 28h** (—Å–æ–∫—Ä–∞—â–µ–Ω–æ —Å 44h)

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø—É—Ç—å:** 1.1 (2h) ‚Üí 2.1 (6h) ‚Üí 2.2 (4h) = **12h**

**–ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏—è:**
- 1.2 –∏ 1.3 –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å 1.1
- 2.3 –∏ 2.4 –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –ø–æ—Å–ª–µ 2.1 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ

---

# üéì –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç—ã —Å roadmap –≤ –Ω–æ–≤—ã—Ö —á–∞—Ç–∞—Ö

## üöÄ –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã –Ω–∞–¥ –∑–∞–¥–∞—á–µ–π (–Ω–æ–≤—ã–π —á–∞—Ç)

### –®–∞–±–ª–æ–Ω –ø—Ä–æ–º–ø—Ç–∞ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞:

```markdown
–ü—Ä–∏–≤–µ—Ç! –Ø –Ω–∞—á–∏–Ω–∞—é —Ä–∞–±–æ—Ç—É –Ω–∞–¥ MCP Comet Browser Refactoring.

# ROADMAP:
–†–∞–±–æ—Ç–∞—é –ø–æ roadmap-v2.md, Task [–ù–û–ú–ï–†_–ó–ê–î–ê–ß–ò]

# –ß–¢–û –ú–ù–ï –ù–£–ñ–ù–û:
1. –ü—Ä–æ—á–∏—Ç–∞–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–µ–∫—Ç–∞:
   Read('/home/admsrv/mcp_comet_for_claude_code/.claude/CLAUDE.md')

2. –ü—Ä–æ—á–∏—Ç–∞–π roadmap:
   Read('/home/admsrv/mcp_comet_for_claude_code/docs/roadmap-v2.md')

3. –ù–∞–π–¥–∏ —Å–µ–∫—Ü–∏—é "Task [–ù–û–ú–ï–†]" –∏ –∏–∑—É—á–∏:
   - –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–±–ª–µ–º—ã
   - –¶–µ–ª—å –∑–∞–¥–∞—á–∏
   - –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏
   - –ü–æ—à–∞–≥–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç

4. –ü—Ä–æ–≤–µ—Ä—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (—Å–º. –≥—Ä–∞—Ñ –≤ roadmap):
   - Task [X] —Ç—Ä–µ–±—É–µ—Ç Task [Y]
   - –£–±–µ–¥–∏—Å—å —á—Ç–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã!

5. –ü—Ä–æ–≤–µ—Ä—å —Ç–µ–∫—É—â—É—é –≤–µ—Ç–∫—É:
   git branch --show-current
   git log -1

# –ü–û–°–õ–ï –ü–†–û–ß–¢–ï–ù–ò–Ø:
–ü–æ–¥—Ç–≤–µ—Ä–¥–∏ —á—Ç–æ —Ç—ã:
- –ü—Ä–æ—á–∏—Ç–∞–ª CLAUDE.md (–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞)
- –ü—Ä–æ—á–∏—Ç–∞–ª Task [–ù–û–ú–ï–†] –ø–æ–ª–Ω–æ—Å—Ç—å—é
- –ü–æ–Ω—è–ª –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ì–æ—Ç–æ–≤ —Å–ª–µ–¥–æ–≤–∞—Ç—å –ø–æ—à–∞–≥–æ–≤–æ–º—É –ø—Ä–æ–º–ø—Ç—É

–ó–∞—Ç–µ–º –Ω–∞—á–Ω–∏ —Å –ø–µ—Ä–≤–æ–≥–æ —à–∞–≥–∞ –∏–∑ –ø—Ä–æ–º–ø—Ç–∞.
```

---

## ‚ôªÔ∏è –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã (–Ω–æ–≤—ã–π —á–∞—Ç, task –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ)

### –®–∞–±–ª–æ–Ω –ø—Ä–æ–º–ø—Ç–∞ –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è:

```markdown
–ü—Ä–∏–≤–µ—Ç! –ü—Ä–æ–¥–æ–ª–∂–∞—é —Ä–∞–±–æ—Ç—É –Ω–∞–¥ Task [–ù–û–ú–ï–†] –∏–∑ roadmap-v2.md

# –ö–û–ù–¢–ï–ö–°–¢:
1. –ü—Ä–æ—á–∏—Ç–∞–π –≥–¥–µ –º—ã –æ—Å—Ç–∞–Ω–æ–≤–∏–ª–∏—Å—å:
   Read('/home/admsrv/mcp_comet_for_claude_code/.claude/CLAUDE.md')
   Read('/home/admsrv/mcp_comet_for_claude_code/docs/roadmap-v2.md')

2. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ:
   git log --oneline -5
   git status

3. –ü—Ä–æ–≤–µ—Ä—å —Ç–µ–∫—É—â—É—é –≤–µ—Ç–∫—É:
   git branch --show-current

# –ì–î–ï –û–°–¢–ê–ù–û–í–ò–õ–ò–°–¨:
[–°–∫–æ–ø–∏—Ä—É–π —Å—é–¥–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3-5 —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —á–∞—Ç–∞]

–ù–∞–ø—Ä–∏–º–µ—Ä:
---
–Ø: –°–æ–∑–¥–∞–π commands/context.py
–¢—ã: –°–æ–∑–¥–∞–ª, –≤–æ—Ç –∫–æ–¥...
–Ø: –û—Ç–ª–∏—á–Ω–æ, —Ç–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–∏ base.py
–¢—ã: –û–±–Ω–æ–≤–ª—è—é... [–ó–î–ï–°–¨ –ü–†–ï–†–í–ê–õ–û–°–¨]
---

# –ß–¢–û –ù–£–ñ–ù–û:
–ü—Ä–æ–¥–æ–ª–∂–∏ —Å —Ç–æ–≥–æ –º–µ—Å—Ç–∞ –≥–¥–µ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª–∏—Å—å.
–°–ª–µ–¥—É–π roadmap Task [–ù–û–ú–ï–†], —à–∞–≥ [–ù–û–ú–ï–†_–®–ê–ì–ê].

–ü–æ–¥—Ç–≤–µ—Ä–¥–∏ —á—Ç–æ –ø–æ–Ω—è–ª –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ –≥–æ—Ç–æ–≤ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å.
```

---

## üèÅ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ (checklist)

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏:

```markdown
# ‚úÖ CHECKLIST –ó–ê–í–ï–†–®–ï–ù–ò–Ø Task [–ù–û–ú–ï–†]

–ü—Ä–æ–≤–µ—Ä—å:
- [ ] –í—Å–µ —à–∞–≥–∏ –∏–∑ roadmap –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- [ ] –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã (—Å–º. roadmap)
- [ ] –ö–æ–¥ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω (—Å–º. —Å–µ–∫—Ü–∏—é "–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å")
- [ ] –°–æ–∑–¥–∞–Ω –∫–æ–º–º–∏—Ç —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º –∏–∑ roadmap
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ: python3 server.py
- [ ] –ö–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç (–ø—Ä–æ–≤–µ—Ä—å 2-3 –ø—Ä–∏–º–µ—Ä–∞)

–ö–æ–º–º–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ roadmap:
[–°–∫–æ–ø–∏—Ä—É–π –≥–æ—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ roadmap Task [–ù–û–ú–ï–†]]

git add .
git commit -m "[–°–û–û–ë–©–ï–ù–ò–ï]"

# –ü–ï–†–ï–•–û–î –ö –°–õ–ï–î–£–Æ–©–ï–ô –ó–ê–î–ê–ß–ï:
- –ü—Ä–æ–≤–µ—Ä—å –≥—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ roadmap
- –ï—Å–ª–∏ –µ—Å—Ç—å –∑–∞–≤–∏—Å–∏–º—ã–µ –∑–∞–¥–∞—á–∏ - –≤—ã–ø–æ–ª–Ω—è–π –∏—Ö
- –ï—Å–ª–∏ –Ω–µ—Ç - –º–æ–∂–µ—à—å –±—Ä–∞—Ç—å—Å—è –∑–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ

# –ó–ê–ü–ò–®–ò –°–¢–ê–¢–£–°:
Task [–ù–û–ú–ï–†]: ‚úÖ Completed
Commit: [HASH]
Time: [–†–ï–ê–õ–¨–ù–û–ï –í–†–ï–ú–Ø]
Issues: [–ï–°–õ–ò –ë–´–õ–ò]
```

---

## üÜò –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

```markdown
# üö® –ü–†–û–ë–õ–ï–ú–ê –ü–†–ò –í–´–ü–û–õ–ù–ï–ù–ò–ò Task [–ù–û–ú–ï–†]

–û–ø–∏—à–∏ –ø—Ä–æ–±–ª–µ–º—É:
[–ß–¢–û –°–õ–£–ß–ò–õ–û–°–¨]

# –û–¢–ö–ê–¢:
Read('/home/admsrv/mcp_comet_for_claude_code/docs/roadmap-v2.md')
–ù–∞–π–¥–∏ —Å–µ–∫—Ü–∏—é "üîô –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π"

–°–ª–µ–¥—É–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º:
1. git log -1
2. git reset --hard HEAD~1
3. python3 server.py  # –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
4. –û–ø–∏—à–∏ –ø—Ä–æ–±–ª–µ–º—É –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

# –ó–ê–¢–ï–ú:
–õ–∏–±–æ:
A) –ü–æ–ø—Ä–æ–±—É–π –∑–∞–¥–∞—á—É –∑–∞–Ω–æ–≤–æ (—Å —É—á—ë—Ç–æ–º –æ—à–∏–±–æ–∫)
B) –°–æ–∑–¥–∞–π issue —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã
C) –ü—Ä–æ–ø—É—Å—Ç–∏ –∑–∞–¥–∞—á—É –∏ —Å–¥–µ–ª–∞–π –Ω–µ–∑–∞–≤–∏—Å–∏–º—É—é
```

---

---

# üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

## –§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞

- **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** `/home/admsrv/mcp_comet_for_claude_code/.claude/CLAUDE.md`
- **Roadmap:** `/home/admsrv/mcp_comet_for_claude_code/docs/roadmap-v2.md`
- **–ö–æ–¥:** `/home/admsrv/mcp_comet_for_claude_code/`

## –í–Ω–µ—à–Ω–∏–µ —Å—Å—ã–ª–∫–∏

- **MCP Spec:** https://spec.modelcontextprotocol.io/
- **CDP Docs:** https://chromedevtools.github.io/devtools-protocol/
- **pychrome:** https://github.com/fate0/pychrome

## Git workflow

```bash
# –¢–µ–∫—É—â–∞—è –≤–µ—Ç–∫–∞ roadmap
git checkout feature/roadmap-v2

# –î–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
git checkout -b task-1.1-metadata
# ... —Ä–∞–±–æ—Ç–∞ ...
git commit -m "..."
git checkout feature/roadmap-v2
git merge task-1.1-metadata
```

---

# üéØ Quick Start –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

–¢—ã –Ω–æ–≤—ã–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫? –ù–∞—á–Ω–∏ –∑–¥–µ—Å—å:

1. **–ü—Ä–æ—á–∏—Ç–∞–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–µ–∫—Ç–∞:**
   ```bash
   cat .claude/CLAUDE.md
   ```

2. **–ü—Ä–æ—á–∏—Ç–∞–π —ç—Ç–æ—Ç roadmap –ø–æ–ª–Ω–æ—Å—Ç—å—é** (–¥–∞, —Ü–µ–ª–∏–∫–æ–º!)

3. **–ü—Ä–æ–≤–µ—Ä—å —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:**
   ```bash
   git log --oneline --graph --all
   git branch
   ```

4. **–û–ø—Ä–µ–¥–µ–ª–∏ —á—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ:**
   - –ò—â–∏ –∫–æ–º–º–∏—Ç—ã —Å "Task X.Y"
   - –ü—Ä–æ–≤–µ—Ä—å checklist –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ —É—Å–ø–µ—Ö–∞

5. **–í—ã–±–µ—Ä–∏ —Å–ª–µ–¥—É—é—â—É—é –∑–∞–¥–∞—á—É:**
   - –ü–æ—Å–º–æ—Ç—Ä–∏ –≥—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
   - –ù–∞—á–Ω–∏ —Å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–π –∏–ª–∏ —Å–ª–µ–¥—É—é—â–µ–π –≤ —Ü–µ–ø–æ—á–∫–µ

6. **–ò—Å–ø–æ–ª—å–∑—É–π –ø—Ä–æ–º–ø—Ç—ã –∏–∑ roadmap:**
   - –ö–æ–ø–∏—Ä—É–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏
   - –°–ª–µ–¥—É–π —à–∞–≥–∞–º
   - –ù–µ –∏–º–ø—Ä–æ–≤–∏–∑–∏—Ä—É–π - –≤—Å—ë —É–∂–µ –ø—Ä–æ–¥—É–º–∞–Ω–æ!

---

**ü§ñ Roadmap V2.1 - –ê–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é**

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ v2.1:**
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ Task 2.4 (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤–º–µ—Å—Ç–æ —É–¥–∞–ª–µ–Ω–∏—è —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –≥—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –∫—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞ –≤—Å–µ–≥–æ roadmap
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –æ—Ç–∫–∞—Ç—É
- ‚úÖ –°–æ–∫—Ä–∞—â–µ–Ω–æ –≤—Ä–µ–º—è: 44h ‚Üí 28h
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è –Ω–æ–≤—ã—Ö —á–∞—Ç–æ–≤
- ‚úÖ Sprint 3 –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ "NOT READY" (–∫–æ–Ω—Ü–µ–ø—Ü–∏–∏)
- ‚úÖ –£–ª—É—á—à–µ–Ω—ã –≤—Å–µ –ø—Ä–æ–º–ø—Ç—ã —Å —è–≤–Ω—ã–º —É–∫–∞–∑–∞–Ω–∏–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**–í–µ—Ä—Å–∏—è:** 2.1
**–î–∞—Ç–∞:** 2025-10-07
**–°—Ç–∞—Ç—É—Å:** Ready for execution ‚úÖ
